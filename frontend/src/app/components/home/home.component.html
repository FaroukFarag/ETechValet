<div class="home-container">
  <!-- Header Section -->
  <div class="welcome-section">
    <div class="welcome-content">
      <div class="top-row">
        <div class="welcome-text">
          <h2 class="welcome-title">{{getGreeting()}}, {{userName}}!</h2>
          <p class="welcome-subtitle">Here's what's happening with your valet service today.</p>
        </div>
        <div class="date-buttons">
          <input #dateFromInput type="date" [(ngModel)]="dateFrom" (ngModelChange)="onDateChange()" class="hidden-date" />
          <input #dateToInput type="date" [(ngModel)]="dateTo" (ngModelChange)="onDateChange()" class="hidden-date" />
          <button class="date-button" type="button" (click)="openDatePicker(dateFromInput)">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
            <div class="date-button-text">
              <span class="date-button-label">Date From</span>
              <span class="date-button-value">{{ dateFrom | date:'MMM d, y' }}</span>
            </div>
          </button>
          <button class="date-button" type="button" (click)="openDatePicker(dateToInput)">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>
              <line x1="16" y1="2" x2="16" y2="6"></line>
              <line x1="8" y1="2" x2="8" y2="6"></line>
              <line x1="3" y1="10" x2="21" y2="10"></line>
            </svg>
            <div class="date-button-text">
              <span class="date-button-label">Date To</span>
              <span class="date-button-value">{{ dateTo | date:'MMM d, y' }}</span>
            </div>
          </button>
        </div>
      </div>
      <!-- Date Error Message -->
      <div class="date-error-message" *ngIf="dateErrorMessage">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <line x1="12" y1="8" x2="12" y2="12"></line>
          <line x1="12" y1="16" x2="12.01" y2="16"></line>
        </svg>
        <span>{{ dateErrorMessage }}</span>
      </div>
      <div class="stats-row">
        <div class="stat-card" *ngFor="let stat of stats" [style.border-left-color]="stat.iconColor">
          <div class="stat-card-body">
            <div class="stat-icon" [style.background-color]="stat.iconBg" [style.color]="stat.iconColor">
        <!-- Car Icon -->
        <svg *ngIf="stat.icon === 'car'" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M7 17h10m-5-5v5m-5-5l2-2h6l2 2"></path>
          <path d="M5 17h14a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2z"></path>
          <circle cx="9" cy="17" r="1"></circle>
          <circle cx="15" cy="17" r="1"></circle>
        </svg>
        
        <!-- Clock Icon -->
        <svg *ngIf="stat.icon === 'clock'" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"></circle>
          <polyline points="12,6 12,12 16,14"></polyline>
        </svg>
        
        <!-- Dollar Icon -->
        <svg *ngIf="stat.icon === 'dollar'" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <line x1="12" y1="1" x2="12" y2="23"></line>
          <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
        </svg>
        
        <!-- Gate/Shield Icon -->
        <svg *ngIf="stat.icon === 'gate'" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path>
        </svg>
        
        <!-- User Icon -->
        <svg *ngIf="stat.icon === 'user'" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
          <circle cx="12" cy="7" r="4"></circle>
        </svg>
            </div>
            <div class="stat-details">
              <div class="stat-value">{{stat.value}}</div>
              <div class="stat-label">{{stat.title}}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Dashboard Content -->
  <div class="dashboard-content">
    <!-- Chart Section -->
    <div class="chart-section">
      <div class="section-card">
        <h3 class="section-title">Total Car By Hours</h3>
        <div class="chart-container">
          <!-- Y-axis labels -->
          <div class="y-axis">
            <div class="y-label">50</div>
            <div class="y-label">25</div>
            <div class="y-label">0</div>
          </div>
          
          <!-- Chart area with bars -->
          <div class="chart-area">
            <div class="bars-container">
              <div class="bars-group" *ngFor="let data of chartData">
                <div class="bar-wrapper">
                  <div class="bar bar-pickup" [style.height.px]="getBarHeight(data.pickups)" [title]="'Pickups: ' + data.pickups">
                    <span class="bar-value" *ngIf="data.pickups > 0">{{data.pickups}}</span>
                  </div>
                  <div class="bar bar-recall" [style.height.px]="getBarHeight(data.recalls)" [title]="'Recalls: ' + data.recalls">
                    <span class="bar-value" *ngIf="data.recalls > 0">{{data.recalls}}</span>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- X-axis labels -->
            <div class="x-axis">
              <div class="x-label" *ngFor="let data of chartData">{{data.hour}}</div>
            </div>
          </div>
        </div>
        
        <!-- Legend -->
        <div class="chart-legend">
          <div class="legend-item">
            <div class="legend-color legend-pickup"></div>
            <span>Pickups</span>
          </div>
          <div class="legend-item">
            <div class="legend-color legend-recall"></div>
            <span>Recalls</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Stats Section -->
    <div class="quick-stats-section">
      <div class="section-card">
        <h3 class="section-title">Quick Stats</h3>
        <div class="quick-stats-list">
          <div class="quick-stat-item" *ngFor="let stat of quickStats">
            <div class="quick-stat-content" [style.border-color]="stat.color">
              <div class="quick-stat-value" [style.color]="stat.color">{{stat.value}}</div>
              <div class="quick-stat-label">{{stat.label}}</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
