<div class="login-page">
  <div class="login-left">
    <header class="brand-header">
      <span class="brand-name">Easy Valet</span>
    </header>

    <main class="login-form-wrapper">
      <h1 class="login-title">Sign in</h1>

      <form [formGroup]="loginForm" (ngSubmit)="onSubmit()" novalidate>
        <div class="form-field" [class.invalid]="userNameControl?.invalid && userNameControl?.touched">
          <label for="userName">Username</label>
          <div class="field-control">
            <span class="icon">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path>
                <circle cx="12" cy="7" r="4"></circle>
              </svg>
            </span>
            <input
              id="userName"
              type="text"
              formControlName="userName"
              placeholder="Enter your username"
              autocomplete="username" />
          </div>
          <div class="field-error" *ngIf="userNameControl?.invalid && userNameControl?.touched">
            <span *ngIf="userNameControl?.errors?.['required']">Username is required.</span>
          </div>
        </div>

        <div class="form-field" [class.invalid]="passwordControl?.invalid && passwordControl?.touched">
          <label for="password">Password</label>
          <div class="field-control">
            <span class="icon">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
              </svg>
            </span>
            <input
              id="password"
              [type]="showPassword ? 'text' : 'password'"
              formControlName="password"
              placeholder="Enter your Password"
              autocomplete="current-password" />
            <button type="button" class="toggle-visibility" (click)="togglePasswordVisibility()" aria-label="Toggle password visibility">
              <svg *ngIf="!showPassword" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M1 12s4-7 11-7 11 7 11 7-4 7-11 7S1 12 1 12Z"></path>
                <circle cx="12" cy="12" r="3"></circle>
              </svg>
              <svg *ngIf="showPassword" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="m3 3 18 18"></path>
                <path d="M10.58 10.58a2 2 0 0 0 2.83 2.83"></path>
                <path d="M9.88 9.88A3 3 0 0 0 13 13"></path>
                <path d="M7.73 7.73A13 13 0 0 0 1 12s4 7 11 7a11.65 11.65 0 0 0 5.16-1.17"></path>
                <path d="M17.94 17.94A13 13 0 0 0 23 12s-4-7-11-7a11.65 11.65 0 0 0-5.17 1.17"></path>
              </svg>
            </button>
          </div>
          <div class="field-error" *ngIf="passwordControl?.invalid && passwordControl?.touched">
            <span *ngIf="passwordControl?.errors?.['required']">Password is required.</span>
          </div>
        </div>

        <div class="field-error" *ngIf="errorMessage" style="margin-bottom: 1rem; text-align: center;">
          <span style="color: #ef4444;">{{ errorMessage }}</span>
        </div>

        <div class="form-actions">
          <label class="remember">
            <input type="checkbox" formControlName="rememberMe" />
            <span>Remember me</span>
          </label>
          <a class="forgot-link" href="#">Forgot Password ?</a>
        </div>

        <button class="submit-btn" type="submit" [disabled]="isSubmitting">
          <span *ngIf="!isSubmitting">Login</span>
          <span *ngIf="isSubmitting" class="loader"></span>
        </button>
      </form>
    </main>
  </div>

  <aside class="login-right">
    <div class="illustration-card">
      <img src="assets/images/loginBackground.png" alt="Valet service illustration" />
    </div>
  </aside>
</div>

